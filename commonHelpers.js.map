{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from \"flatpickr\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst refs = {\n  input: document.querySelector(\"#datetime-picker\"),\n  startBtn: document.querySelector(\"[data-start]\"),\n  daysField: document.querySelector(\"[data-days]\"), \n  hoursField: document.querySelector(\"[data-hours]\"), \n  minField: document.querySelector(\"[data-minutes]\"), \n  secField: document.querySelector(\"[data-seconds]\"), \n}\n\nlet userSelectedDate = null\nlet timeInterval = null\n\n flatpickr(refs.input, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const selectedDate = selectedDates[0];\n    const currentDate = new Date()\n    if (selectedDate <= currentDate) {\n      iziToast.error({\n        title: \"Error\",\n        message: \"Please choose a date in the future\"\n      })\n      refs.startBtn.disabled = true\n    } else {\n      refs.startBtn.disabled = false\n      userSelectedDate = selectedDate\n    }\n  },\n});\n\nrefs.startBtn.addEventListener(\"click\", () => {\n  refs.startBtn.disabled = true\n  refs.input.disabled = true\n\n  timeInterval = setInterval(() => {\n    const currentTime = new Date()\n    const deltaTime = userSelectedDate - currentTime;\n    if (deltaTime <=0 ) {\n      clearInterval(timeInterval)\n      updateTimeFields(0, 0, 0, 0)\n      iziToast.success({\n        title: \"Success\",\n        message: \"Countdown completed\"\n      })\n      refs.startBtn.disabled = false\n      refs.input.disabled = false\n      return\n    }\n    const days = Math.floor(deltaTime / (1000 * 60 * 60 * 24));\n  // Remaining hours\n    const hours = Math.floor((deltaTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));;\n  // Remaining minutes\n    const minutes = Math.floor((deltaTime % (1000 * 60 * 60)) / (1000 * 60));\n  // Remaining seconds\n    const seconds = Math.floor((deltaTime % (1000 * 60)) / 1000);\n\n    updateTimeFields(days, hours, minutes, seconds)\n  }, 1000)\n})\n  \nfunction addLeadingZero(value) {\n  return String(value).padStart(2, \"0\")\n}\n\nfunction updateTimeFields(days, hours, minutes, seconds) {\n  refs.daysField.textContent = addLeadingZero(days)\n  refs.hoursField.textContent = addLeadingZero(hours)\n  refs.minField.textContent = addLeadingZero(minutes)\n  refs.secField.textContent = addLeadingZero(seconds)\n}\n\n\n"],"names":["refs","userSelectedDate","timeInterval","flatpickr","selectedDates","selectedDate","iziToast","deltaTime","updateTimeFields","days","hours","minutes","seconds","addLeadingZero","value"],"mappings":"0IASA,MAAMA,EAAO,CACX,MAAO,SAAS,cAAc,kBAAkB,EAChD,SAAU,SAAS,cAAc,cAAc,EAC/C,UAAW,SAAS,cAAc,aAAa,EAC/C,WAAY,SAAS,cAAc,cAAc,EACjD,SAAU,SAAS,cAAc,gBAAgB,EACjD,SAAU,SAAS,cAAc,gBAAgB,CACnD,EAEA,IAAIC,EAAmB,KACnBC,EAAe,KAElBC,EAAUH,EAAK,MAAO,CACrB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQI,EAAe,CACrB,MAAMC,EAAeD,EAAc,CAAC,EAEhCC,GADgB,IAAI,MAEtBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oCACjB,CAAO,EACDN,EAAK,SAAS,SAAW,KAEzBA,EAAK,SAAS,SAAW,GACzBC,EAAmBI,EAEtB,CACH,CAAC,EAEDL,EAAK,SAAS,iBAAiB,QAAS,IAAM,CAC5CA,EAAK,SAAS,SAAW,GACzBA,EAAK,MAAM,SAAW,GAEtBE,EAAe,YAAY,IAAM,CAE/B,MAAMK,EAAYN,EADE,IAAI,KAExB,GAAIM,GAAY,EAAI,CAClB,cAAcL,CAAY,EAC1BM,EAAiB,EAAG,EAAG,EAAG,CAAC,EAC3BF,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,qBACjB,CAAO,EACDN,EAAK,SAAS,SAAW,GACzBA,EAAK,MAAM,SAAW,GACtB,MACD,CACD,MAAMS,EAAO,KAAK,MAAMF,GAAa,IAAO,GAAK,GAAK,GAAG,EAEnDG,EAAQ,KAAK,MAAOH,GAAa,IAAO,GAAK,GAAK,KAAQ,IAAO,GAAK,GAAG,EAEzEI,EAAU,KAAK,MAAOJ,GAAa,IAAO,GAAK,KAAQ,IAAO,GAAG,EAEjEK,EAAU,KAAK,MAAOL,GAAa,IAAO,IAAO,GAAI,EAE3DC,EAAiBC,EAAMC,EAAOC,EAASC,CAAO,CAC/C,EAAE,GAAI,CACT,CAAC,EAED,SAASC,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASN,EAAiBC,EAAMC,EAAOC,EAASC,EAAS,CACvDZ,EAAK,UAAU,YAAca,EAAeJ,CAAI,EAChDT,EAAK,WAAW,YAAca,EAAeH,CAAK,EAClDV,EAAK,SAAS,YAAca,EAAeF,CAAO,EAClDX,EAAK,SAAS,YAAca,EAAeD,CAAO,CACpD"}